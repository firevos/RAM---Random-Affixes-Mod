<configs>
    <!-- Kill tracker-->
    <append xpath="/items/item[property[@name='Tags' and contains(@value,'ranged') and not(contains(@value,'ammo'))]]">
        <effect_group name="increase kill count">
            <!-- Setup kill counter if this item does not have it yet. -->
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="kills"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="upgrades"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="nextUpgrade"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="lastUpgrade"/>

            <!-- Increase counter for every kill -->
            <!-- <triggered_effect trigger="onSelfKilledOther" action="SetItemMetaFloat" change="1" relative="true" key="kills">
                <requirement name="EntityTagCompare" target="other" tags="zombie"/>
            </triggered_effect> -->

        </effect_group>
    </append>

    <append xpath="/items/item[property[@name='Tags' and contains(@value,'melee') and not(contains(@value,'noMods'))] and not(@name='meleeHandMaster') and not(@name='meleeHandPlayer')]">
        <effect_group name="increase kill count">
            <!-- Setup kill counter if this item does not have it yet. -->
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="kills"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="upgrades"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="nextUpgrade"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="lastUpgrade"/>

            <!-- Increase counter for every kill -->
            <!-- <triggered_effect trigger="onSelfKilledOther" action="SetItemMetaFloat" change="1" relative="true" key="kills">
                <requirement name="EntityTagCompare" target="other" tags="zombie"/>
            </triggered_effect> -->

        </effect_group>
    </append>

    <append xpath="/items/item[@name='meleeWpnSpearT1IronSpear' or @name='meleeWpnSpearT3SteelSpear' or @name='meleeToolShovelT2SteelShovel' or @name='meleeToolPickT2SteelPickaxe' or @name='meleeToolAxeT2SteelAxe']">
        <effect_group name="increase kill count">
            <!-- Setup kill counter if this item does not have it yet. -->
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="kills"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="upgrades"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="nextUpgrade"/>
            <triggered_effect trigger="onSelfEquipStart" action="SetItemMetaFloat" change="0" relative="true" key="lastUpgrade"/>

            <!-- Increase counter for every kill -->
            <!-- <triggered_effect trigger="onSelfKilledOther" action="SetItemMetaFloat" change="1" relative="true" key="kills">
                <requirement name="EntityTagCompare" target="other" tags="zombie"/>
            </triggered_effect> -->

        </effect_group>
    </append>

    <insertBefore xpath="/items/item[@name='casinoCoin']">
        <item name="affixRerollToken">
            <property name="Tags" value="reroll"/>
            <property name="HoldType" value="45"/>
            <property name="Meshfile" value="@:Other/Items/Misc/sackPrefab.prefab"/>
            <property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
            <property name="Material" value="MresourceScrapBrassSmall"/>
            <property name="MeltTimePerUnit" value=".4"/>
            <property name="Weight" value="100"/>
            <property name="Stacknumber" value="10"/> <!-- STK resource -->
            <property name="EconomicValue" value="2000"/>
            <property name="EconomicBundleSize" value="1"/>
            <property name="SellableToTrader" value="false"/>
            <property name="SoundPickup" value="coins_grab"/>
            <property name="SoundPlace" value="coins_place"/>
        </item>

        <item name="affixExtractionToken">
            <property name="Tags" value="extraction"/>
            <property name="HoldType" value="45"/>
            <property name="Meshfile" value="@:Other/Items/Misc/sackPrefab.prefab"/>
            <property name="DropMeshfile" value="@:Other/Items/Misc/sack_droppedPrefab.prefab"/>
            <property name="Material" value="MresourceScrapBrassSmall"/>
            <property name="MeltTimePerUnit" value=".4"/>
            <property name="Weight" value="100"/>
            <property name="Stacknumber" value="10"/> <!-- STK resource -->
            <property name="EconomicValue" value="5000"/>
            <property name="EconomicBundleSize" value="1"/>
            <property name="SellableToTrader" value="false"/>
            <property name="SoundPickup" value="coins_grab"/>
            <property name="SoundPlace" value="coins_place"/>
        </item>
    </insertBefore>

    <insertAfter xpath="/items/item[@name='meleeWpnBladeT1HuntingKnife']">
        <item name="meleeWpnBladeT1HuntingKnifeUnique">
	        <property name="Extends" value="meleeWpnBladeT1HuntingKnife"/>
            <property name="Tags" value="unique_affix_mod,affixModSmell,affixModBleed6,affixModDurabilityBase6,affixModInstaKill5,affixModLifesteal5,affixModStamKill3,knife,melee,grunting,light,perkFlurryOfAgility,weapon,meleeWeapon,attAgility,perkDeepCuts,perkTheHuntsman,canHaveCosmetic,bladeSkill,corpseRemoval"/>
            <property name="TintColor" value="91,68,29"/>
            <property name="Smell" value="20"/>
            <property name="EconomicValue" value="4000"/>
            
            <property class="Action0">
                <property name="Class" value="DynamicMelee"/>
                <property name="Damage_type" value="Piercing"/>
                <property name="Sphere" value=".1"/>
                <property name="Sound_start" value="knife_metal_swinglight"/>
                <property name="ToolCategory.harvestingTools" value=".5" param1="1"/>
                <property name="ToolCategory.Butcher" value="0" param1="5"/>
                <property name="UseGrazingHits" value="false"/>
                <property name="GrazeStart" value=".25"/>
                <property name="GrazeEnd" value=".35"/>
                <property name="SwingDegrees" value="90"/>
                <property name="SwingAngle" value="90"/>
                <property class="HitSounds">
                    <property name="Override0" value="organic" param1="metalstaborganic"/>
                </property>
                <property class="GrazeSounds">
                    <property name="Override0" value="organic" param1="metalgrazeorganic"/>
                </property>
                <property name="HarvestLength" value="1.15"/>
            </property>
            <property class="Action1">
                <property name="Class" value="DynamicMelee"/>
                <property name="Damage_type" value="Piercing"/>
                <property name="Sphere" value=".1"/>
                <property name="Sound_start" value="knife_metal_swingheavy"/>
                <property name="ToolCategory.harvestingTools" value=".5" param1="1"/>
                <property name="ToolCategory.Butcher" value="0" param1="5"/>
                <property name="UsePowerAttackAnimation" value="true"/>
                <property name="UseGrazingHits" value="false"/>
                <property name="GrazeStart" value=".2"/>
                <property name="GrazeEnd" value=".3"/>
                <property name="SwingDegrees" value="80"/>
                <property name="SwingAngle" value="140"/>
                <property class="HitSounds">
                    <property name="Override0" value="organic" param1="metalstaborganic"/>
                </property>
                <property class="GrazeSounds">
                    <property name="Override0" value="organic" param1="metalgrazeorganic"/>
                </property>
                <property name="HarvestLength" value="1.6"/>
            </property>
            <effect_group name="meleeWpnBladeT1HuntingKnife">
                <passive_effect name="AttacksPerMinute" operation="base_set" value="120" tags="perkDeepCuts,perkFlurryOfAgility"/>
                <passive_effect name="StaminaLoss" operation="base_set" value="10.5" tags="primary"/>
                <passive_effect name="DegradationMax" operation="base_set" value="500,1000" tier="1,6" tags="perkDeepCuts"/>
                <passive_effect name="DegradationPerUse" operation="base_set" value="1" tags="perkDeepCuts"/>
                <passive_effect name="MaxRange" operation="base_set" value="2.0" tags="perkDeepCuts"/>
                <passive_effect name="BlockRange" operation="base_set" value="2.5" tags="perkDeepCuts"/>
                <passive_effect name="ModSlots" operation="base_set" value="4,2,2,3,3,4" tier="1,2,3,4,5,6"/>
                <passive_effect name="EntityDamage" operation="base_set" value="12" tags="perkDeepCuts,knife"/> <!-- meleeWpnBladeT1HuntingKnife -->
                <passive_effect name="EntityDamage" operation="perc_add" value="-.04,.04" tags="perkDeepCuts"/> <!-- random EntityDmg -->
                <passive_effect name="BlockDamage" operation="base_set" value="6.5" tags="perkDeepCuts"/>
                <passive_effect name="BlockDamage" operation="perc_add" value="-.04,.04" tags="perkDeepCuts"/> <!-- random BlockDmg -->
                <passive_effect name="BlockDamage" operation="perc_add" value=".1,.5" tier="2,6" tags="perkDeepCuts"/> <!-- tier bonus -->
                <passive_effect name="DamageModifier" operation="perc_add" value="-.8" tags="earth"/>
                <passive_effect name="DamageModifier" operation="perc_add" value="-.8" tags="stone"/>
                <passive_effect name="DamageModifier" operation="perc_add" value="-.8" tags="metal"/>
                <passive_effect name="DamageModifier" operation="perc_add" value=".6" tags="organic"/>
                <!-- <passive_effect name="DamageModifier" operation="perc_add" value="0" tags="organic"/> affects organic block harvesting based on block.material.damage_category, not animal corpse harvesting -->
                <passive_effect name="HarvestCount" operation="base_set" value="1" tags="butcherHarvest"/>
                <!--<passive_effect name="BlockDamage" operation="perc_add" value="6" tags="blockButcher"/>-->
            </effect_group>
            <effect_group name="Power Attack">
                <passive_effect name="EntityDamage" operation="base_add" value="6" tags="secondary"/>
                <passive_effect name="EntityDamage" operation="perc_add" value="1" tags="secondary"/>
                <passive_effect name="BlockDamage" operation="perc_add" value="1" tags="secondary"/>
                <passive_effect name="AttacksPerMinute" operation="base_add" value="-60" tags="secondary"/>
                <passive_effect name="StaminaLoss" operation="base_set" value="13.5" tags="secondary"/>
            </effect_group>
            <effect_group name="sneak damage bonus">
                <requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
                <requirement name="CVarCompare" cvar="_notAlerted" operation="GT" value="0" target="other"/>
                    <passive_effect name="DamageBonus" operation="base_add" value="4"/>
                    <passive_effect name="EntityDamage" operation="perc_add" value="4" tags="perkDeepCuts"/>
                    <display_value name="dEntityDamageSneak" value="4"/>
            </effect_group>
        </item>
    </insertAfter>

    <!-- <insertAfter xpath="items/item[@name='gunHandgunT3DesertVulture']">
        <item name="gunHandgunT3DesertVultureUnique">
	        <property name="Extends" value="gunHandgunT3DesertVulture"/>
            <property name="EconomicValue" value="10000"/>
            <property class="Action0">
                <property name="Class" value="Ranged"/>
                <property name="Magazine_items" value="ammo44MagnumBulletBall,ammo44MagnumBulletHP,ammo44MagnumBulletAP"/>
                <property name="Sound_start" value="desertvulture_fire"/>
                <property name="Sound_loop" value="desertvulture_fire"/>
                <property name="Sound_end" value=""/>
                <property name="Sound_empty" value="dryfire"/>
                <property name="AutoReload" value="false"/>
                <property name="Particles_muzzle_fire" value="gunfire_pistol_desertvulture"/>
                <property name="triggerEffectTriggerPullDualsense" value="PistolTrigger"/>
                <property name="triggerEffectTriggerPullXbox" value="PistolTrigger"/>
                <property name="triggerEffectShootDualsense" value="PistolShoot"/>
                <property name="triggerEffectShootXbox" value="PistolShoot"/>
            </property>
            <property class="Action1">
                <property name="Class" value="Zoom"/>
                <property name="Zoom_max_out" value="55"/>
                <property name="Zoom_max_in" value="55"/>
                <property name="SightsCameraOffset" value="0,.0008,0"/>
                <property name="zoomTriggerEffectPullDualsense" value="PistolZoom"/>
                <property name="zoomTriggerEffectPullXb" value="PistolZoom"/>
            </property>
            <effect_group name="gunHandgunT3DesertVulture">
                <passive_effect name="MaxRange" operation="base_set" value="50" tags="perkGunslinger"/>
                <passive_effect name="DamageFalloffRange" operation="base_set" value="30" tags="perkGunslinger"/>
                <passive_effect name="DamageFalloffRange" operation="perc_add" value="-.2,.2" tier="1,6" tags="perkGunslinger"/>
                <passive_effect name="RoundsPerMinute" operation="base_set" value="130" tags="perkGunslinger"/>
                <passive_effect name="BurstRoundCount" operation="base_set" value="1" tags="perkGunslinger"/>
                <passive_effect name="MagazineSize" operation="base_set" value="8.8" tags="perkGunslinger"/>
                <passive_effect name="ReloadSpeedMultiplier" operation="base_set" value="1" tags="perkGunslinger"/>
                <passive_effect name="ModSlots" operation="base_set" value="3,3,3,4,4,4,5" tier="1,2,3,4,5,6,7"/>
                <passive_effect name="ModPowerBonus" operation="perc_add" value=".10" tags="EntityDamage,BlockDamage"/>
                <passive_effect name="ModPowerBonus" operation="base_add" value="300" tags="EconomicValue"/>
                <passive_effect name="EntityDamage" operation="base_add" value="20" tags="perkGunslinger"/>
                <passive_effect name="EntityDamage" operation="perc_add" value="-.02,.02" tags="perkGunslinger"/>
                <passive_effect name="BlockDamage" operation="perc_add" value="-.08,.08" tags="perkGunslinger"/>
                <passive_effect name="WeaponHandling" operation="perc_add" value="-.08,.08" tags="perkGunslinger"/>

                <passive_effect name="SpreadDegreesVertical" operation="base_set" value="1.3" tags="perkGunslinger"/>
                <passive_effect name="SpreadDegreesHorizontal" operation="base_set" value="1.3" tags="perkGunslinger"/>
                <passive_effect name="SpreadMultiplierAiming" operation="base_set" value=".35" tags="perkGunslinger"/>
                <passive_effect name="SpreadMultiplierCrouching" operation="base_set" value=".8" tags="perkGunslinger"/>
                <passive_effect name="SpreadMultiplierWalking" operation="base_set" value="1.5" tags="perkGunslinger"/>
                <passive_effect name="SpreadMultiplierRunning" operation="base_set" value="2.2" tags="perkGunslinger"/>

                <passive_effect name="KickDegreesVerticalMin" operation="base_set" value="3.5" tags="perkGunslinger"/>
                <passive_effect name="KickDegreesVerticalMax" operation="base_set" value="4" tags="perkGunslinger"/>
                <passive_effect name="KickDegreesHorizontalMin" operation="base_set" value="-.3" tags="perkGunslinger"/>
                <passive_effect name="KickDegreesHorizontalMax" operation="base_set" value=".15" tags="perkGunslinger"/>

                <passive_effect name="IncrementalSpreadMultiplier" operation="base_set" value="3.2" tags="perkGunslinger"/>
                <passive_effect name="WeaponHandling" operation="base_set" value=".6" tags="perkGunslinger"/>

                <passive_effect name="DegradationMax" operation="base_set" value="500,700" tier="1,6" tags="perkGunslinger"/>
                <passive_effect name="DegradationPerUse" operation="base_set" value="1" tags="perkGunslinger"/>
            </effect_group>
        </item>
    </insertAfter> -->

    <insertAfter xpath="/items/item[@name='gunRifleT1HuntingRifle']">
        <item name="gunRifleT1HuntingRifleUnique">
            <property name="Extends" value="gunRifleT1HuntingRifle"/>
            <property name="Tags" value="unique_affix_mod,affixModReloadSpeedDouble,affixModRangePerc6,affixModHeadshotDamageBase6,affixModHeadshotDamagePerc5,affixModGunAccuracy5,weapon,ranged,holdBreathAiming,reloadPenalty,gun,barrelAttachments,sideAttachments,smallTopAttachments,mediumTopAttachments,largeTopAttachments,stock,bottomAttachments,attPerception,perkDeadEye,attachmentsIncluded,canHaveCosmetic,rifleSkill"/>
            <property name="EconomicValue" value="3000"/>

            <property class="Action0">
                <property name="Class" value="Ranged"/>
                <property name="Delay" value=".5"/> <!-- obsolete if rounds per minute exists -->
                <property name="Magazine_items" value="ammo762mmBulletBall,ammo762mmBulletHP,ammo762mmBulletAP"/>
                <property name="Reload_time" value="2.66"/>
                <property name="Sound_start" value="sniperrifle_fire"/>
                <property name="Sound_repeat" value=""/>
                <property name="Sound_end" value=""/>
                <property name="Sound_empty" value="dryfire"/>
                <property name="Sound_reload" value="hunting_rifle_reload"/>
                <property name="AutoReload" value="false"/>
                <property name="Particles_muzzle_fire" value="gunfire_rifle_hunting"/>
                <property name="ScopeOffset" value="-.00062,.1115,.125"/>
                <property name="SideOffset" value="0,0,0"/>
                <property name="BarrelOffset" value="0,0,0"/>
                <property name="triggerEffectTriggerPullDualsense" value="RifleTrigger"/>
                <property name="triggerEffectTriggerPullXbox" value="PistolTrigger"/>
                <property name="triggerEffectTriggerShootDualsense" value="RifleShoot"/>
                <property name="triggerEffectTriggerShootXbox" value="PistolShoot"/>
            </property>
            <property class="Action1">
                <property name="Class" value="Zoom"/>
                <property name="Zoom_max_out" value="55"/>
                <property name="Zoom_max_in" value="55"/>
                <property name="zoomTriggerEffectTriggerPullDualsense" value="PistolZoom"/>
                <property name="zoomTriggerEffectTriggerPullXbox" value="PistolZoom"/>
            </property>
            <effect_group name="gunRifleT1HuntingRifle">
                <passive_effect name="MaxRange" operation="base_set" value="150" tags="perkDeadEye"/>
                <passive_effect name="DamageFalloffRange" operation="base_set" value="59" tags="perkDeadEye"/>
                <passive_effect name="DamageFalloffRange" operation="perc_add" value="-.1,.06" tier="1,7" tags="perkDeadEye"/> <!-- random effective rng -->
                <passive_effect name="BlockDamage" operation="base_add" value="-1" tags="perkDeadEye"/> <!-- damage offset -->
                <passive_effect name="RoundsPerMinute" operation="base_set" value="120" tags="perkDeadEye"/>
                <passive_effect name="BurstRoundCount" operation="base_set" value="1" tags="perkDeadEye"/>
                <passive_effect name="MagazineSize" operation="base_set" value="1" tags="perkDeadEye"/>
                <passive_effect name="ReloadSpeedMultiplier" operation="base_set" value=".81" tags="perkDeadEye"/> <!-- 2.66s -->
                <passive_effect name="ModSlots" operation="base_set" value="2,2,2,3,3,4,5" tier="1,2,3,4,5,6,7"/>
                <passive_effect name="ModPowerBonus" operation="perc_add" value=".10" tags="EntityDamage,BlockDamage"/>
                <passive_effect name="ModPowerBonus" operation="base_add" value="300" tags="EconomicValue"/>
                <passive_effect name="EntityDamage" operation="base_add" value="11" tags="perkDeadEye"/> <!-- damage offset -->
                <passive_effect name="EntityDamage" operation="perc_add" value="-.02,.02" tags="perkDeadEye"/> <!-- random EntityDmg -->
                <passive_effect name="EntityDamage" operation="perc_add" value=".05,.3" tier="2,7" tags="perkDeadEye"/> <!-- tier bonus -->
                <passive_effect name="BlockDamage" operation="perc_add" value="-.08,.08" tags="perkDeadEye"/> <!-- random BlockDmg -->
                <passive_effect name="BlockDamage" operation="perc_add" value=".15,.9" tier="2,7" tags="perkDeadEye"/> <!-- tier bonus -->
                <passive_effect name="WeaponHandling" operation="perc_add" value="-.08,.08" tags="perkDeadEye"/> <!-- random WeaponHandling -->

                <passive_effect name="SpreadDegreesVertical" operation="base_set" value="5" tags="perkDeadEye"/>
                <passive_effect name="SpreadDegreesHorizontal" operation="base_set" value="5" tags="perkDeadEye"/>
                <passive_effect name="SpreadMultiplierAiming" operation="base_set" value=".08" tags="perkDeadEye"/>
                <passive_effect name="SpreadMultiplierCrouching" operation="base_set" value=".8" tags="perkDeadEye"/>
                <passive_effect name="SpreadMultiplierWalking" operation="base_set" value="1.5" tags="perkDeadEye"/>
                <passive_effect name="SpreadMultiplierRunning" operation="base_set" value="2" tags="perkDeadEye"/>

                <passive_effect name="KickDegreesVerticalMin" operation="base_set" value=".5" tags="perkDeadEye"/>
                <passive_effect name="KickDegreesVerticalMax" operation="base_set" value="2" tags="perkDeadEye"/>
                <passive_effect name="KickDegreesHorizontalMin" operation="base_set" value="-.35" tags="perkDeadEye"/>
                <passive_effect name="KickDegreesHorizontalMax" operation="base_set" value=".35" tags="perkDeadEye"/>

                <passive_effect name="IncrementalSpreadMultiplier" operation="base_set" value="50" tags="perkDeadEye"/>
                <passive_effect name="WeaponHandling" operation="base_set" value=".65" tags="perkDeadEye"/>

                <passive_effect name="DegradationMax" operation="base_set" value="200,500" tier="1,7" tags="perkDeadEye"/>
                <passive_effect name="DegradationPerUse" operation="base_set" value="1" tags="perkDeadEye"/>
                
                <passive_effect name="DamageModifier" operation="base_add" value="50" tags="head"/>
            </effect_group>
        </item>
    </insertAfter>

</configs>
